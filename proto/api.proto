// To generate code: protoc --go_out=paths=source_relative:. proto/api.proto

syntax = "proto3";

package api;

option go_package = "./;main";

// RPCs

service API {
    rpc Put (PutRequest) returns(PutResponse);
    rpc Get (GetRequest) returns (GetResponse);
    rpc Watch (stream WatchRequest) returns (stream WatchResponse);
}

// Data containers

message Item {
    string Key = 1;
    string Value = 2;
}

message WatchConfig {
    string Key = 1;
    string Prefix = 2;
}

// Messages

message PutRequest {
    Item Item = 1;
}

message PutResponse{}

message GetRequest {
    string Key = 1;
}

message GetResponse {
    Item Item = 1;
}

message WatchRequest {
    WatchConfig Add = 1;
    WatchConfig Remove = 2;
}

message WatchResponse {
    repeated Item Item = 1;
}

